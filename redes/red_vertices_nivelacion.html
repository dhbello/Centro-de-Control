<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-JB8FKBC408"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-JB8FKBC408");
    </script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Centro de Control Geod&eacute;sico Nacional</title>
    <link rel="icon" href="/images/favicon.png">
    <link
    rel="stylesheet"
    type="text/css"
    href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css"
  />
  <script src="./../js/jquery-3.5.1.js"></script>
 
   
   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <link href="../../css/style.css" rel="stylesheet" />
    <link href="/css/navbar-footer.css" rel="stylesheet">
    <link href="../../css/maestra.css" rel="stylesheet" />
  </head>
  <body class="main redes">
    <!-- header -->
    <div class="barra_gov">
      <a class="logo-gov" href="https://www.gov.co/home/" target="_blank">
          <img alt="Logo Gov.co" src="/images/nav/header_govco.png">
      </a>
    </div>
    <div class="navbarIgacContainer origen"></div>
    <nav class="nav nav-underline"></nav>
     <section class="portada-igac portadaSub redActiva">
      <div class="container block-igac">
        <div class="row contenido-portada m-0  mt-4 verde-control-vertical">
          <div class="col-md-12 position-absolute get-backContainer">
            <a class="get-back" href="/redes/red_geodesica.html"
              ><img src="/images/iconos/arrow-back.svg" alt="" />Volver a la Red
              Geodésica GNSS</a
            >
          </div>
          <div class="texto-portada">
            <h1>Red de Control Vertical de Precisión</h1>
            <p>
                Las alturas medidas en metros sobre el nivel medio del mar de los vértices geodésicos de referencia, 
                son de utilidad para el desarrollo de proyectos de ingeniería, cartografía, planeación municipal y regional, 
                geociencias, gestión del riesgo y prevención de desastres, catastro multipropósito, geodinámica, investigación, 
                obras civiles y estudios de infraestructura municipal, academia y en general aquellos que requieran de un sistema 
                vertical de referencia.
            </p>
          </div>
        </div>
      </div>
    </section>
    
  
    <div id="redActivaPasiva" class="container containerIgac">
        

        


        <section id="visor" class="section">
          <h2 class="title">
            Visor centro de procesamiento IGA - IGAC
          </h2>
          <div id="viewDiv"></div>
        </section>

        <section id="acceso" class="section">
          <div class="row">
            <div class="col-md-6">
             
                <div class="faqs dobles tipo-a">
                  <div class="title">
                    La existencia física de los vértices nivelados debe ser verificada por el ciudadano si así lo requiriese, 
                    ya que no se garantiza la existencia de los mismos a la fecha de uso.
                  </div>
                </div>
             
            </div>      
            
            <div class="col-md-6">
              
                <div class="">
                  <div class="title descargar" onclick="descargarVertices()">Descargar Vértices Nivelción</div>
                </div>
              
            </div> 

          </div>
        </section>
  
        
      </div>

        <div class="typeB"></div>
    


    <div class="container">
      <div class="row">
        <div class="col">        
          <h3 class="azur">Datos Ejemplo</h3>
          <table class="table table-striped mt-2">
            <thead>
              <tr>                
                <th scope="col">Nomenclatura</th>
                <th scope="col">Latitud</th>                          
                <th scope="col">Altura</th>          
                <th scope="col">Altura elipsoidal</th>          
              </tr>
            </thead>
            <tbody id="table-body">
              
            </tbody>
            <tfoot>
              <tr>                
                <th scope="col">Nomenclatura</th>
                <th scope="col">Latitud</th>                           
                <th scope="col">Altura</th>          
                <th scope="col">Altura elipsoidal</th>               
              </tr>
            </tfoot>
          </table>

        
        </div>
      </div>
    </div>

      

    <footer class="footer origen"></footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script> 

  
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
 
    <script src="/index.js"></script>
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.24/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.24/"></script>
   
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.24/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.24/"></script>
    <script>
      // (async () => {
      //   let url = "https://mapas.igac.gov.co/server/rest/services/centrocontrol/EstacionesGNSS/MapServer?f=pjson";
      // const datos = await fetch(url);
      // const res = await datos.json();
      // console.log(res)
      // })();
      
      require([
        "esri/config",
        "esri/Map",
        "esri/views/MapView",
        "esri/widgets/Home",
        "esri/widgets/ScaleBar",
        "esri/widgets/LayerList",
        "esri/widgets/Legend",
        "esri/widgets/Expand",
        "esri/widgets/Compass",
        "esri/geometry/Extent",
        "esri/layers/MapImageLayer",
        "esri/layers/VectorTileLayer",
      ], (
        esriConfig,
        Map,
        MapView,
        Home,
        ScaleBar,
        LayerList,
        Legend,
        Expand,
        Compass,
        Extent,
        MapImageLayer,
        VectorTileLayer,        
      ) => {
        esriConfig.apiKey =
          "AAPK2a2e861a0c794bfdb29a1b4ce47b1583OBbY7CvHSkUPhQ20FG1hZEbAl5GmTTZcs-cyoy2tw5to5j_pJiiTW6J_KRbBx-qS";
        const vtlLayer = new VectorTileLayer({
          url: "https://tiles.arcgis.com/tiles/RVvWzU3lgJISqdke/arcgis/rest/services/Mapa_base_topografico/VectorTileServer",          
        });
        const layer = new MapImageLayer({
        //   url: "https://mapas.igac.gov.co/server/rest/services/centrocontrol/EstacionesGeodesicas/MapServer",
          url: "https://mapas.igac.gov.co/server/rest/services/geodesia/redcontrolverticaldeprecision/MapServer/",        
          title:"",
          sublayers: [          
            {
              id: 0,
              title:"",
              visible: true,
              popupTemplate: {
                title: "Atributos",
                outFields: [""],
                content: [
                  {
                    "type": "fields",
                    "fieldInfos": [
                      {
                        "fieldName": "FID",
                        "label": "FID"
                      },
                      {
                        "fieldName": "Nomenclatu",
                        "label": "Nomenclatura"
                      },       
                      {
                        "fieldName": "Latitud",
                        "label": "Latitud"
                      },     
                      {
                        "fieldName": "Longitud",
                        "label": "Longitud"
                      },
                      {
                        "fieldName": "Altura_m_s",
                        "label": "Altura"
                      },
                      {
                        "fieldName": "Línea_Niv",
                        "label": "Línea nivelada"
                      },
                      {
                        "fieldName": "Bloque_Aju",
                        "label": "Bloque ajustado"
                      },
                      {
                        "fieldName": "Año_Calcu",
                        "label": "Año calculo"
                      },
                      {
                        "fieldName": "Alt_Elipso",
                        "label": "Altura elipsoidal"
                      },
                      {
                        "fieldName": "Tipo_Coord",
                        "label": "Tipo coordenada"
                      },
                      {
                        "fieldName": "Estado_Vé",
                        "label": "Estado vértice"
                      },
                      {
                        "fieldName": "Código_De",
                        "label": "Código departamento"
                      },
                      {
                        "fieldName": "Nombre_Dep",
                        "label": "Nombre departamento"
                      },
                      {
                        "fieldName": "Concatenad",
                        "label": "Código municipio"
                      },
                      {
                        "fieldName": "Nombre_Mun",
                        "label": "Nombre municipio"
                      },
                    
                    ]
                  }
                ],
              },
            //   definitionExpression:"es_activa_gnss = 1",                  
            },
          ],
        });
        const map = new Map({
          layers: [vtlLayer, layer],
        });
        const view = new MapView({
          container: "viewDiv",
          map: map,
          center: [-74, 4], // longitude, latitude
          zoom: 4.8,
        });        
        const homeBtn = new Home({
          view: view,
        });
        const scaleBar = new ScaleBar({
          view: view,
          unit: "dual",
        });
        const layerList = new LayerList({          
          view: view,
        });
        const legend = new Legend({
          view: view,          
        });
        // console.log(legend)
        const layerListExpand = new Expand({
          view: view,
          content: layerList,
          expanded: false,
          expandTooltip: "Expand LayerList",
          mode: "floating",
        });
        // console.log(legend)
        const legendExpand = new Expand({
          view: view,
          content: legend,
          expandTooltip: "Expand Legend",
          expanded: true,
          mode: "floating",
        });
        const compass = new Compass({
          view: view,
          visible: false,
        });
        view.ui.add(homeBtn, "top-left");
        view.ui.add(scaleBar, "bottom-right");
        view.ui.add(layerListExpand, "top-right");
        view.ui.add(legendExpand, "bottom-left");
        view.ui.add(compass, "top-left");
        layer.when(() => {
          const initialExtent = Extent.fromJSON(layer.sourceJSON.initialExtent);
          view.goTo(initialExtent);          
        });
        // load the Compass only when the view is rotated
        view.watch("rotation", function (rotation) {
          if (rotation && !compass.visible) {
            compass.visible = true;
          }
        });
      });
    </script>



     
  <script>
      
      const descargarVertices = async () => {
        
            
            try {

            const datos = await fetch("./../json/VerticesNivelacion2022.csv");
            const resp = await datos.text();
            //console.log(resp);            
            
            var oMyBlob = new Blob([resp], { type: "text/html" });

            var link = document.createElement("a");    
            link.href = window.URL.createObjectURL(oMyBlob);        
            link.download = "VerticesNivelacion2022.csv";
            document.body.appendChild(link);
            link.click();
            // console.log(datos)
          } catch (error) {
            console.log(error)
          }


      }
  </script>


    

    <script type="module" async>         
     

      const tabularCordenadas = () => {
                const arreglo = [
                                {
                                  "OBJECTID": 1,
                                  "Nomenclatura": "C70-W-2",
                                  "Altura_m_s_n_m_m": "19,488600000000002",
                                  "Línea_Nivelación": "Línea No 2 Buenaventura - Bogotá",
                                  "Bloque_Ajuste": "Circuito 1 y 2",
                                  "Año_Calculo": 2021,
                                  "Latitud": "3,881045870795000",
                                  "Longitud": "-77,012215965549004",
                                  "Alt_Elipsoidal_m_": "37,329000000000001",
                                  "Tipo_Coordenada": "CALCULADA",
                                  "Código_Departamento": 76,
                                  "Código_Municipio": 109,
                                  "Concatenado_Depto_Municipio": 76109,
                                  "Nombre_Departamento": "VALLE DEL CAUCA",
                                  "Nombre_Municipio": "BUENAVENTURA",
                                  "Estado_Vértice": "Materializado",
                                  "Dif_El_Geo": "",
                                  "ErrDif": ""
                                },
                                {
                                  "OBJECTID": 2,
                                  "Nomenclatura": 76109037,
                                  "Altura_m_s_n_m_m": "12,882270000000000",
                                  "Línea_Nivelación": "Línea No 2 Buenaventura - Bogotá",
                                  "Bloque_Ajuste": "Circuito 1 y 2",
                                  "Año_Calculo": 2021,
                                  "Latitud": "3,887763063000000",
                                  "Longitud": "-77,073318607000004",
                                  "Alt_Elipsoidal_m_": "29,786000000000001",
                                  "Tipo_Coordenada": "CALCULADA",
                                  "Código_Departamento": 76,
                                  "Código_Municipio": 109,
                                  "Concatenado_Depto_Municipio": 76109,
                                  "Nombre_Departamento": "VALLE DEL CAUCA",
                                  "Nombre_Municipio": "BUENAVENTURA",
                                  "Estado_Vértice": "Materializado",
                                  "Dif_El_Geo": "",
                                  "ErrDif": ""
                                },
                                {
                                  "OBJECTID": 3,
                                  "Nomenclatura": 76109002,
                                  "Altura_m_s_n_m_m": "10,817170000000001",
                                  "Línea_Nivelación": "Línea No 2 Buenaventura - Bogotá",
                                  "Bloque_Ajuste": "Circuito 1 y 2",
                                  "Año_Calculo": 2021,
                                  "Latitud": "3,883496220000000",
                                  "Longitud": "-77,065329993999995",
                                  "Alt_Elipsoidal_m_": "27,986000000000001",
                                  "Tipo_Coordenada": "CALCULADA",
                                  "Código_Departamento": 76,
                                  "Código_Municipio": 109,
                                  "Concatenado_Depto_Municipio": 76109,
                                  "Nombre_Departamento": "VALLE DEL CAUCA",
                                  "Nombre_Municipio": "BUENAVENTURA",
                                  "Estado_Vértice": "Materializado",
                                  "Dif_El_Geo": "",
                                  "ErrDif": ""
                                },
                                {
                                  "OBJECTID": 4,
                                  "Nomenclatura": 76109038,
                                  "Altura_m_s_n_m_m": "4,583310000000000",
                                  "Línea_Nivelación": "Línea No 2 Buenaventura - Bogotá",
                                  "Bloque_Ajuste": "Circuito 1 y 2",
                                  "Año_Calculo": 2021,
                                  "Latitud": "3,882939502000000",
                                  "Longitud": "-77,054338266000002",
                                  "Alt_Elipsoidal_m_": "21,795999999999999",
                                  "Tipo_Coordenada": "CALCULADA",
                                  "Código_Departamento": 76,
                                  "Código_Municipio": 109,
                                  "Concatenado_Depto_Municipio": 76109,
                                  "Nombre_Departamento": "VALLE DEL CAUCA",
                                  "Nombre_Municipio": "BUENAVENTURA",
                                  "Estado_Vértice": "Materializado",
                                  "Dif_El_Geo": "",
                                  "ErrDif": ""
                                },
                                {
                                  "OBJECTID": 5,
                                  "Nomenclatura": 76109024,
                                  "Altura_m_s_n_m_m": "9,195010000000000",
                                  "Línea_Nivelación": "Línea No 2 Buenaventura - Bogotá",
                                  "Bloque_Ajuste": "Circuito 1 y 2",
                                  "Año_Calculo": 2021,
                                  "Latitud": "3,882651483000000",
                                  "Longitud": "-77,046951043999997",
                                  "Alt_Elipsoidal_m_": "26,498999999999999",
                                  "Tipo_Coordenada": "CALCULADA",
                                  "Código_Departamento": 76,
                                  "Código_Municipio": 109,
                                  "Concatenado_Depto_Municipio": 76109,
                                  "Nombre_Departamento": "VALLE DEL CAUCA",
                                  "Nombre_Municipio": "BUENAVENTURA",
                                  "Estado_Vértice": "Materializado",
                                  "Dif_El_Geo": "",
                                  "ErrDif": ""
                                },
                              ]

          let registros = "";

          let contador = 1;
          for(let item of arreglo){
            contador++;
            if(contador == 11) break;
            // console.log(item.semana);
            registros += `
                  <tr>                    
                    <td>${item.Nomenclatura}</td>
                    <td>${item.Latitud}</td>                                  
                    <td>${item.Altura_m_s_n_m_m}</td>     
                    <td>${item.Alt_Elipsoidal_m_}</td>     
                  </tr>
              `;
          }
            document.getElementById("table-body").innerHTML = registros;  
      }
      tabularCordenadas();



      

      
     
    </script>
  </body>
</html>
