<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Control Geod&eacute;sico Nacional</title>
    <link rel="icon" href="images-home/logos/favicon.png">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/maestra.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css" />


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.1/dist/leaflet.css"
        integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.1/dist/leaflet.js"
        integrity="sha256-NDI0K41gVbWqfkkaHj15IzU7PtMoelkzyKp8TOaFQ3s=" crossorigin=""></script>

    <style>
        #mapa_estacion {
            height: 350px;
            z-index: 0;
        }
    </style>

</head>

<body class="main redes geodesicaMaestra redActivaPagina">
    <nav class="navbarigac origen">
    </nav>
    <nav class="nav nav-underline">
    </nav>
    <section class="portada-igac portadaSub redActiva">
        <div class="container block-igac">
            <div class="row contenido-portada m-0">
                <div class="col-md-12 position-absolute get-backContainer">
                    <a class="get-back" href="../red_geodesica.html"><img src="/images/iconos/arrow-back.svg"
                            alt="">Volver a la Red Activa</a>
                </div>
                <div class="col-md-12">
                    <div class="texto-portada">
                        <h1 id="titulo">Nombre de la red y el ID</h1>
                        <p>
                            (Marco Geoc&eacute;ntrico Nacional de Estaciones Continuas) (GNSS: &ldquo;Global Navigation
                            Satellite System&rdquo; - Sistema Global de Navegaci&oacute;n Satelital)
                        </p>
                    </div>
                </div>
                <div class="col-md-12 position-absolute identifiers">
                    <div class="row">
                        <div class="col-md-6" id="sigla">
                            <p>

                            </p>
                        </div>
                        <div class="col-md-6">
                            <p id="iers">

                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container containerIgac infoUbicacionContainer">
        <div class="row">
            <div class="col-md-6">
                <section class="section infoUbicacion">
                    <div class="title">
                        Informaci&oacute;n de ubicaci&oacute;n
                    </div>
                    <div class="item" id="departamento">
                        Departamento:
                    </div>
                    <div class="item" id="municipio">
                        Municipio: Arauquita
                    </div>
                    <div class="item" id="barrio">
                        Barrio o Sector: Caserio Selvas de Lipa
                    </div>
                    <div class="item" id="localizacion">
                        Localizaci&oacute;n: Base Militar LIPA
                    </div>
                    <div class="item" id="divipola">
                        C&oacute;digo Divipola (Divisi&oacute;n Pol&iacute;tico-Administrativa): 81065
                    </div>
                </section>
                <div class="divider"></div>
                <section class="section infoUbicacion pt-0">
                    <div class="title">
                        Informaci&oacute;n de instalaci&oacute;n
                    </div>
                    <div class="item" id="tipo_materializacion">
                        Tipo de Monumento: Piso
                    </div>
                    <div class="item" id="fecha_materializacion">
                        Fecha Monumentaci&oacute;n: 3/22/2021
                    </div>
                    <div class="item" id="altura_referencia_antena">
                        Altura Instrumental (m): 0,0350
                    </div>
                    <div class="item" id="lugar_materializacion">
                        Localizaci&oacute;n: Base Militar LIPA
                    </div>
                    <div class="item" id="divipola">
                        C&oacute;digo Divipola (Divisi&oacute;n Pol&iacute;tico-Administrativa): 81065
                    </div>
                </section>
                <div class="divider"></div>
                <section class="section infoUbicacion pt-0">
                    <div class="title">
                        Informaci&oacute;n del equipo
                    </div>
                    <table class="customeTable">
                        <tbody>
                            <tr>
                                <th>ELEMENTO</th>
                                <th>TIPO</th>
                                <th>MARCA</th>
                                <th>SERIAL</th>
                            </tr>
                        </tbody>
                        <tbody>
                            <tr>
                                <td>
                                    Antena GNSS:
                                </td>
                                <td id="antena_tipo">
                                    TRM159900.00 SCIS
                                </td>
                                <td id="antena_marca">
                                    TRIMBLE
                                </td>
                                <td id="antena_serial">
                                    5942338804
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Receptor GNSS:
                                </td>
                                <td id="receptor_modelo">
                                    ALLOY
                                </td>
                                <td id="receptor_marca">
                                    TRIMBLE
                                </td>
                                <td id="receptor_serial">
                                    5947R40164
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section class="section infoUbicacion pt-0 mt-5">
                    <div class="title">
                        Instrumentaci&oacute;n
                    </div>
                    <img src="/images/images-redes/instrumentacionRedActiva.svg" alt="">
                    <p>TCR: Top of Chokering, BCR: Bottom of Chokering, BPA – ARP: Bottom of Preamplifier- Antenna
                        Reference Point https://geodesy.noaa.gov/ANTCAL/FAQ.xhtml#faq4</p>
                </section>
                <div class="divider"></div>
                <section class="section infoUbicacion pt-0">
                    <div class="title">
                        Coordenadas
                    </div>
                    <table class="customeTable type2">
                        <tbody>
                            <tr>
                                <th>Coordenadas elipsoidales</th>
                                <th>Coordenadas elipsoidales</th>
                            </tr>
                        </tbody>
                        <tbody>
                            <tr>
                                <td id="latitud">

                                </td>
                                <td id="x">

                                </td>
                            </tr>
                            <tr>
                                <td id="altura">

                                </td>
                                <td id="z">

                                </td>
                            </tr>
                            <tr>
                                <td id="longitud">

                                </td>
                                <td id="y">

                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section class="section infoUbicacion pt-5">
                    <div class="title">
                        Informaci&oacute;n de rastreo
                    </div>
                    <div class="item">
                        Departamento: GPS y GLONASS
                    </div>
                    <div class="item">
                        Intervalo de Registro: 1 segundo (Hatanaka.gz) 15 segundos (Observado.gz)
                    </div>
                    <div class="item">
                        Formato de Archivos: RINEX
                    </div>
                    <div class="item">
                        Versi&oacute;n Formato: 2.11
                    </div>
                    <div class="item">
                        Periodos de Grabaci&oacute;n: 24/7
                    </div>
                    <div class="item">
                        Corte de Archivo: 19:00 Hora Local
                    </div>
                </section>
            </div>
            <div class="col-md-6">
                <section class="section infoUbicacion">
                    <div class="title">
                        Ubicaci&oacute;n en Planta de la Estaci&oacute;n
                    </div>
                    <div class="item">
                        <div id="mapa_estacion"></div>
                    </div>
                </section>
                <section class="section infoUbicacion pt-5">
                    <div class="title">
                        Ubicaci&oacute;n en Planta de la Estaci&oacute;n
                    </div>
                    <div class="item">

                        <section id="slideshow">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="slick slideshow">
                                            <div id="div1"><img id="img1"
                                                    src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                                    alt="" /></div>
                                            <div id="div2"><img id="img2"
                                                    src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                                    alt="" /></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <img id="img3" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="" />
                    </div>

            </div>
            </section>
            <section class="section infoUbicacion pt-5">
                <div class="title">
                    Contacto
                </div>
                <div class="item" id="oficina">

                </div>
                <div class="item" id="direccion">

                </div>
                <div class="item" id="agencia_correo_electronico">

                </div>
            </section>
            <div class="divider"></div>
            <section class="section infoUbicacion pt-0">
                <p style=" color: #3a3a3a;">
                    Nota: La red de estaciones GNSS de funcionamiento continuo MAGNA–ECO hace parte de la red
                    SIRGAS-CON (Sistema de Referencia Geocéntrico para las Américas–Red de Operación Continua), la
                    cual es procesada semanalmente por los Centros Locales de Procesamiento SIRGAS; estos Centros
                    generan soluciones semanales que detallan coordenadas de alta precisión (Asociadas a una época
                    específica de referencia) y sus cambios a través del tiempo (Velocidades de las estaciones) para
                    cada estación. Las coordenadas de dichas estaciones están disponibles sin costo alguno de manera
                    pública en el sitio web
                    http://www.sirgas.org/es/sirgas-con-network/coordinates/weekly-positions/. Para las estaciones
                    de la red MAGNA–ECO que no se encuentran en el reporte de coordenadas de la red SIRGAS-CON puede
                    ingresar a través del ftp://geodesia.igac.gov.co.
                </p>
            </section>
        </div>
    </div>
    </div>

    <footer class="footer origen">

    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js">
    </script>
    <script src="/index.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>


    <link rel="stylesheet" href="https://js.arcgis.com/4.24/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.24/"></script>

    <script type="module">

        import {queryFeatures}  from "https://cdn.skypack.dev/@esri/arcgis-rest-feature-service@4.0.3";

         function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
        var estacion = getParameterByName('estacion');
        var nombre = getParameterByName('nombre');
        var id = getParameterByName('id');

        document.getElementById('titulo').innerHTML='Red '+nombre+' - '+estacion


        $.ajax({
      type: 'get',
      url: url_backend+"/json_detalle_activa",
      data: {
        "id": estacion
      },
      dataType: "json",
      success: function (result) {
        
        var obj=result[0];

        console.log(obj)

        function check(data){
            if (data == null){
            return "Sin información"
        }else{
            return data

        }
        }

        
        document.getElementById('sigla').innerHTML="Nombre (Identificaci&oacute;n seg&uacute;n IGS SIRGAS): "+check(obj.identificador);

        document.getElementById('iers').innerHTML="Identificación según el ITRF: "+check(obj.numero_domo_iers);   


            document.getElementById('departamento').innerHTML="Departamento: "+check(obj.departamento);
            document.getElementById('municipio').innerHTML="Municipio: "+check(obj.municipio);
            document.getElementById('barrio').innerHTML="Barrio: "+check(obj.agencia_direccion);
            document.getElementById('localizacion').innerHTML="Localizacion: "+check(obj.agencia_direccion);
            document.getElementById('divipola').innerHTML="Código Divipola: "+check(obj.codigo);


            document.getElementById('tipo_materializacion').innerHTML="Tipo de Monumento: "+check(obj.tipo_materializacion);
            document.getElementById('fecha_materializacion').innerHTML="Fecha Monumentación: "+check(obj.fecha_materializacion);
            document.getElementById('altura_referencia_antena').innerHTML="Altura Instrumental (m): "+check(obj.altura_referencia_antena);
            document.getElementById('lugar_materializacion').innerHTML="Localización: "+check(obj.lugar_materializacion);
            document.getElementById('divipola').innerHTML="Código Divipola: "+check(obj.codigo);


            document.getElementById('antena_tipo').innerHTML=check(obj.antena_modelo);
            document.getElementById('antena_marca').innerHTML=check(obj.antena_marca);
            document.getElementById('antena_serial').innerHTML=check(obj.antena_serial);

            document.getElementById('receptor_modelo').innerHTML=check(obj.receptor_modelo);
            document.getElementById('receptor_marca').innerHTML=check(obj.receptor_marca);
            document.getElementById('receptor_serial').innerHTML=check(obj.receptor_serial);

            document.getElementById('oficina').innerHTML="Oficina: "+check(obj.agencia_nombre);
            document.getElementById('direccion').innerHTML="Dirección: "+check(obj.agencia_direccion);
            document.getElementById('agencia_correo_electronico').innerHTML="Email de contacto: "+check(obj.agencia_mail);


            document.getElementById('latitud').innerHTML="Latitud: "+check(obj.estacion_latitud);
            document.getElementById('altura').innerHTML="Altura: "+check(obj.estacion_altura_elipsoidal);
            document.getElementById('longitud').innerHTML="Longitud: "+check(obj.estacion_longitud);

            document.getElementById('x').innerHTML="X(m): "+check(obj.x);
            document.getElementById('z').innerHTML="Z(m): "+check(obj.z);
            document.getElementById('y').innerHTML="	Y(m): "+check(obj.y);

            if(obj.foto_antena!==null){
                document.getElementById('img1').src=obj.foto_antena;
            }else{
                $('#div1').remove()
            }

            if(obj.foto_estacion!==null){
                document.getElementById('img2').src=obj.foto_estacion;
            }else{
  
                $('#div2').remove()
            }



            $(".slideshow ").slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 3500,
                arrows: true,
                dots: true,
                pauseOnHover: false,
                responsive: [{
                        breakpoint: 768,
                        settings: {
                            slidesToShow: 2,
                        },
                    },
                    {
                        breakpoint: 520,
                        settings: {
                            slidesToShow: 1,
                        },
                    },
                ],
            });


        var latitud=obj.estacion_latitud;
        var longitud=obj.estacion_longitud;

        console.log(latitud)
        console.log(longitud)

        if (typeof obj.estacion_latitud === 'number' && !Number.isNaN(obj.estacion_latitud)) {
            if (typeof obj.estacion_latitud === 'number' && !Number.isNaN(obj.estacion_latitud)) {
            
             }else{
                latitud=0;
                longitud=0;
             }
            }else{
                latitud=0;
                longitud=0;
            }


        //mapa de la estación


        require([
            "esri/config",
            "esri/Map",
            "esri/views/MapView",
            "esri/widgets/Home",
            "esri/widgets/ScaleBar",
            "esri/widgets/LayerList",
            "esri/widgets/Legend",
            "esri/widgets/Expand",
            "esri/widgets/Compass",
            "esri/geometry/Extent",
            "esri/layers/MapImageLayer",
            "esri/geometry/Circle",
            "esri/Graphic"
        ], (
            esriConfig, Map, MapView, Home, ScaleBar, LayerList, Legend,
            Expand, Compass, Extent, MapImageLayer,Circle,Graphic
        ) => {
            esriConfig.apiKey =
                "AAPK2a2e861a0c794bfdb29a1b4ce47b1583OBbY7CvHSkUPhQ20FG1hZEbAl5GmTTZcs-cyoy2tw5to5j_pJiiTW6J_KRbBx-qS";

            const map = new Map({
                basemap: "arcgis-topographic"
            });
            const view = new MapView({
                container: "mapa_estacion",
                map: map,
                zoom: 16,
                center: [longitud, latitud],
            });
            const homeBtn = new Home({
                view: view
            });
            const scaleBar = new ScaleBar({
                view: view,
                unit: "dual"
            });

            const compass = new Compass({
                view: view,
                visible: false
            });
            const circleGeometry = new Circle({
                center: [ longitud, latitud ],
                geodesic: true,
                numberOfPoints: 100,
                radius: 10,
                radiusUnit: "meters"
            });


            view.ui.add(homeBtn, "top-left");
            view.ui.add(scaleBar, "bottom-right");
            view.ui.add(compass, "top-left");

            view.graphics.add(new Graphic({
                geometry: circleGeometry,
                

                symbol: {
                    type: "simple-fill",
                    style: "solid",
                    color: [ 255, 115, 95 , 0.9 ],
                    outline: {
                        width: 1,
                        color: "red"
                    }
                }
                }));



            // load the Compass only when the view is rotated
            view.watch('rotation', function (rotation) {
                if (rotation && !compass.visible) {
                    compass.visible = true;
                }
            });
        });
  
        try {
        document.getElementById('img3').src=url_backend+'/ver_img_activa/'+id
    } catch (ex) {
        console.log(ex)
    }

      }
    });


 




</script>



</body>

</html>
