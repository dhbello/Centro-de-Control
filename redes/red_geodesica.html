<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Control Geod&eacute;sico Nacional</title>
    <link rel="icon" href="images-home/logos/favicon.png">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/maestra.css" rel="stylesheet">
</head>
<body class="main redes geodesicaMaestra">
    <nav class="navbarigac origen">
    </nav>
    <nav class="nav nav-underline">
    </nav>
    <section class="portada-igac portadaSub origen">
        <div class="container block-igac">
            <div class="d-flex contenido-portada">
                <div class="texto-portada">
                    <h1>Red Geod&eacute;sica GNSS</h1>
                    <p>La Red Geod&eacute;sica GNSS es el conjunto de puntos distribu&iacute;dos y materializados en
                        ubicaciones estraegicas del territorio colombiano para definir el marco de referencia
                        geod&eacute;sico nacional.</p>
                </div>
            </div>
        </div>
    </section>
    <div id="redActivaPasiva" class="container containerIgac">
        <section id="acceso" class="section">
            <div class="row">
                <div class="col-md-6">
                    <a href="redes_interna/red_activa.html">
                        <div class="faqs dobles tipo-a">
                            <div class="title">
                                Red Activa
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-6">
                    <a href="redes_interna/red_pasiva_nivelacion.html">
                        <div class="faqs dobles tipo-b">
                            <div class="title">
                                Red Pasiva y de Nivelaci&oacute;n
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </section>
        <section id="visor" class="section">
            <div id="viewDiv"></div>
        </section>

        <div class="typeB">
            <div class="container containerIgac">        
                <section class="section">
                    <div class="m-auto w-100">
                        <table id="tbl" class="display">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Contribuyente</th>
                                    <th>Ubicación</th>
                                    <th>Estado</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                        </table>
                        
                    </div>
                </section>
            </div>
        </div>


    </div>
    <div class="containercolor">
        <div class="container containerIgac">
            <section id="participa" class="section">
                <div class="title text-center">
                    Participa activamente de la Red
                </div>
                <div class="row card-no-border">
                    <div class="col-md-4 text-center mb-5">
                        <img src="/images/images-redes/bullets-grafico1.svg" alt="">           
                        <h2 class="fw-normal">Consulta y edita <br> la ficha de los v&eacute;rtices</h2>
                    </div>
                    <div class="col-md-4 text-center mb-5 modalIntEstaciones" data-toggle="modal" data-target="#modalIntEstaciones">
                        <img src="/images/images-redes/bullets-grafico2.svg" alt="">              
                        <h2 class="fw-normal">Registra y postula <br> un nuevo v&eacute;rtice</h2>
                    </div>
                    <div class="col-md-4 text-center mb-5 modalButtonReportar" data-toggle="modal" data-target="#reportarModal">
                        <img src="/images/images-redes/bullets-grafico3.svg" alt="">             
                        <h2 class="fw-normal">Reporta novedades <br> sobre los v&eacute;rtices</h2>                    
                    </div>
                </div>
            </section>            
        </div>
    </div>
    <div class="container containerIgac">
        <section class="section">
            <div class="row">
                <div class="col-md-4">
                    <div class="context">
                        <div class="text">
                            Los Mapas de la Red
                        </div>
                        <div class="resume">
                            Encuentra y visualiza los mapas de los todos los puntos geodésicos existentes en Colombia: Redes Activas, Redes Pasivas, Red de Control Vertical de Precisión, Red Gravimétrica y la Red Geomagnética. Nuestras redes están ubicadas a lo largo y ancho del territorio.
                        </div>
                    </div>
                    <div class="boton-faqs type2">
                        <a href="#">Visitar Temática Geodesia</a>            
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="row cardLosMapas">
                        <div class="col-md-6 mb-4">
                            <div class="card shadow-sm">
                                <div class="card-header d-flex">
                                    <div class="title">Magna Eco</div>
                                    <div class="cta">Vistar CEM ›</div>
                                </div>
                                <div class="image">
                                    <div class="gradient"></div>
                                    <img src="/images/images-redes/map1.png" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4 typeb">
                            <div class="card shadow-sm">
                                <div class="card-header d-flex">
                                    <div class="title">Red de control vertical</div>
                                    <div class="cta">Vistar CEM ›</div>
                                </div>
                                <div class="image">
                                    <div class="gradient"></div>
                                    <img src="/images/images-redes/map2.png" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 typec">
                            <div class="card shadow-sm">
                                <div class="card-header d-flex">
                                    <div class="title">GeoRed</div>
                                    <div class="cta">Vistar CEM ›</div>
                                </div>
                                <div class="image">
                                    <div class="gradient"></div>
                                    <img src="/images/images-redes/map3.png" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 typed">
                            <div class="card shadow-sm">
                                <div class="card-header d-flex">
                                    <div class="title">Densificación de la red</div>
                                    <div class="cta">Vistar CEM ›</div>
                                </div>
                                <div class="image">
                                    <div class="gradient"></div>
                                    <img src="/images/images-redes/map4.png" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!--<div class="beforeImage" style="border-bottom: 1px solid #000;">
        <div class="container containerIgac">
            <section id="contribuye" class="section">
                <div class="resourses-title" style="text-align: center;">
                    <h2>Contribuyentes de la Red</h2>
                </div>
                <div class="row">
                    <div class="text-center">
                        <p class="lead mb-3 mr-auto ml-auto col-md-8">#JuntosHacemosMas, por eso la Red Activa es el resultado de los esfuerzos conjuntos de varias entidades en la construcci&oacute;n de una red densificada de estaciones de operaci&oacute;n continua exploradas y materializadas. A la fecha somos: El Instituto Geogr&aacute;fico Agust&iacute;n Codazzi (IGAC), Servicio Geol&oacute;gico Colombiano (SGC), Empresa de Acueducto y Alcantarillado de Bogot&aacute; (EAAB), Servicio Nacional de Aprendizaje (SENA), la Universidad Distrital, Galileo Instruments y CELSIA, en el marco de su misionalidad. S&uacute;mate.</p>
                        
                        <div class="row">
                            <div class="m-auto redTable2">
                                <table id="redTable" class="display mt-4">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Nombre de la Entidad</th>
                                            <th>Estaciones activas</th>
                                            <th>Estaciones pasivas</th>
                                            <th style="display: none;"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>EABB</td>
                                            <td>#</td>
                                            <td>#</td>
                                            <td><a href="/redes/redes_interna/maestra.html?estacion=IGAC"> Ir</a></td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>IGAC, SGC</td>
                                            <td>#</td>
                                            <td>#</td>
                                            <td><a href="#">Ir</a></td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>DGFI</td>
                                            <td>#</td>
                                            <td>#</td>
                                            <td><a href="#">Ir</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="m-auto">
                        <table id="tbl" class="display mt-4">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre de la Entidad</th>
                                    <th>Estaciones activas</th>
                                    <th>Estaciones pasivas</th>
                                    <th>Ir</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </div> -->
    <div class="containerbg">
        <div class="container containerIgac">
            <section id="info" class="section">
                <div class="row">
                    <div class="col-md-7 m-auto card-contain">
                        <div class="card shadow-sm cardTypeb">
                            <h2>Sobre la Red</h2>
                            <div class="block">
                                <h2>¿Qué es?</h2>
                                <p>El conjunto de v&eacute;rtices geod&eacute;sicos definidos y materializados estrat&eacute;gicamente en campo con el fin de representar el marco de referencia terrestre y generar informaci&oacute;n GNSS de alta precisi&oacute;n que represente la realidad del terreno permite registrar movimientos milim&eacute;tricos en la tierra, detectando cambios muy peque&ntilde;os en periodos de tiempo prolongados.</p>
                                <h2>¿Por qué es importante?</h2>
                                <p>Provee informaci&oacute;n precisa que sirve como insumo para la generaci&oacute;n de
                                    cartograf&iacute;a en diferentes &aacute;reas de estudio. Por ejemplo: Catastro
                                    Multiprop&oacute;sito, en Planes de Ordenamiento Territorial, para el Medio
                                    Ambiente, en Comunicaciones, en Agricultura, en estudios cient&iacute;ficos,
                                    Gesti&oacute;n del Riesgo, entre otros.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <footer class="footer origen">
    </footer>
    <div class="floatingMenu">
        <ul class="containerLinks">
            <li><a class="acceso" href="#acceso"><img src="/images/iconos/update_icono.svg" alt=""></a></li>
            <li><a class="visor" href="#visor"><img src="/images/iconos/eye_icono.svg" alt=""></a></li>
            <li><a class="participa" href="#participa"><img src="/images/iconos/pen_icono.svg" alt=""></a></li>
            <li><a class="contribuye" href="#contribuye"><img src="/images/iconos/flag_icono.svg" alt=""></a></li>
            <li><a class="info" href="#info"><img src="/images/iconos/info_icono.svg" alt=""></a></li>
        </ul>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js">
    </script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
    <script src="/index.js"></script>
    <script>
        $(function() {
            $('a[href*="#"]:not([href="#"])').click(function() {
                if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
                    if (target.length) {
                        $('html, body').animate({
                            scrollTop: target.offset().top - 80
                        }, 500);
                        return false;
                    }
                }
            });
        });
    </script>
    <link rel="stylesheet" href="https://js.arcgis.com/4.24/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.24/"></script>
    <script>
        require([
            "esri/config",
            "esri/Map",
            "esri/views/MapView",
            "esri/widgets/Home",
            "esri/widgets/ScaleBar",
            "esri/widgets/LayerList",
            "esri/widgets/Legend",
            "esri/widgets/Expand",
            "esri/widgets/Compass",
            "esri/geometry/Extent",
            "esri/layers/MapImageLayer"
        ], (
            esriConfig, Map, MapView, Home, ScaleBar, LayerList, Legend,
            Expand, Compass, Extent, MapImageLayer
        ) => {
            esriConfig.apiKey =
                "AAPK2a2e861a0c794bfdb29a1b4ce47b1583OBbY7CvHSkUPhQ20FG1hZEbAl5GmTTZcs-cyoy2tw5to5j_pJiiTW6J_KRbBx-qS";
            const layer = new MapImageLayer({
                url: "https://mapas.igac.gov.co/server/rest/services/centrocontrol/EstacionesGeodesicas/MapServer",
                sublayers: [{
                    id: 0,
                    visible: true,
                    definitionExpression: "es_activa_gnss + es_pasiva_gnss +es_nivelacion >0"
                }]
            });
            const map = new Map({
                layers: [layer],
                basemap: "arcgis-topographic"
            });
            const view = new MapView({
                container: "viewDiv",
                map: map
            });
            const homeBtn = new Home({
                view: view
            });
            const scaleBar = new ScaleBar({
                view: view,
                unit: "dual"
            });
            const layerList = new LayerList({
                view: view
            });
            const legend = new Legend({
                view: view
            });
            const layerListExpand = new Expand({
                view: view,
                content: layerList,
                expanded: false,
                expandTooltip: "Expand LayerList"
            });
            const legendExpand = new Expand({
                view: view,
                content: legend,
                expandTooltip: "Expand Legend",
                expanded: false
            });
            const compass = new Compass({
                view: view,
                visible: false
            });
            view.ui.add(homeBtn, "top-left");
            view.ui.add(scaleBar, "bottom-right");
            view.ui.add(layerListExpand, "top-right");
            view.ui.add(legendExpand, "bottom-left");
            view.ui.add(compass, "top-left");
            layer.when(() => {
                const initialExtent = Extent.fromJSON(layer.sourceJSON.initialExtent);
                view.goTo(initialExtent);
            });
            // load the Compass only when the view is rotated
            view.watch('rotation', function (rotation) {
                if (rotation && !compass.visible) {
                    compass.visible = true;
                }
            });
        });
    </script>


<script type="module">

    var table;
    
    import {queryFeatures}  from "https://cdn.skypack.dev/@esri/arcgis-rest-feature-service@4.0.3";
        /* consulta indicador 1 */
        queryFeatures({
            url: "https://mapas.igac.gov.co/server/rest/services/centrocontrol/EstacionesGeodesicas/MapServer/0",
            where: "es_activa_gnss+es_pasiva_gnss>0",
            returnGeometry:'false',
            outStatistics:[{
                    statisticType: "count",
                    onStatisticField: "es_activa_gnss",
                    outStatisticFieldName: "out"
                }
                ]
            })
            .then((result)=>{
                var draw= result.features[0].attributes.out;
    
                let texto='';
    
                var uri='https://mapas.igac.gov.co/server/rest/services/centrocontrol/EstacionesGeodesicas/MapServer/0/query?where=es_activa_gnss%2Bes_pasiva_gnss>0'+texto+'&outFields=t_id%2Cidentificador%2Cagencia_sigla%2Credes%2Cestado&returnGeometry=false&f=pjson';
                console.log(uri)
    
            table= $('#tbl').DataTable({
                    orderCellsTop: true,
                    serverSide: true,
                    fixedHeader: true,
                   searching: false,
                    ajax: {
                        url: uri,
                        data: function (d) {
                            d.resultRecordCount = d.length;
                            d.resultOffset=d.start;
                        },
                        "dataSrc": function ( json ) {
                            console.log(json)
                            var obj=json.features;
                            var arr1=[]
                            Object.keys(obj).forEach(function(key, index) {
                                obj[key].attributes["id"] = index;
                                obj[key].attributes["ir"] = '/redes/redes_interna/rinex.html?estacion=' + obj[key].attributes.identificador+'&id='+ obj[key].attributes.t_id;
                                
                                var item=[]
    
                                Object.keys(obj[key].attributes).forEach(function(key2, index) {
                                    item.push(obj[key].attributes[key2])   
                                })
                            
                                arr1.push(obj[key].attributes)
                            });
                           
                            json.recordsTotal = draw
                            json.recordsFiltered = draw
                            json.data=arr1;
     
                            return json.data;
                            },
                    },
                    columns: [
                        {
                            data: 'identificador'
                        },
                        {
                            data: 'agencia_sigla'
                        },
                        {
                            data: 'redes'
                        },
                        {
                            data: 'estado',
                            render: function (dataField) {
                                var clase="inactivo"
                                if(dataField==("Activa")){
                                    clase="activo"
                                }else if(dataField==null){
                                clase="vacio";
                                dataField=""
                            }
                                return '<span class="'+clase+'">'+dataField+'</span>';
                            }
                        },
                        {
                            data: 'ir',
                            render: function (dataField) {
                                return '<a href="">Más</a>';
                            }
                        },
                        {
                            data: 'ir',
                            render: function (dataField) {
                                return '<a href="'+dataField+'">Archivo Rinex</a>';
                            }
                        }
                    ],
    
    
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            },
    
    
                });
    
                $('#tbl thead th').each(function () {
                var title = $(this).text();
                $(this).html(title+' <input type="text" class="col-search-input" placeholder="Search ' + title + '" />');
            });
            
            table.columns().every(function (i) {
                var table = this;
                $('input', this.header()).on('keyup change', function () {
                    if (table.search() !== this.value) {
    
                        var column="";

                        switch(i){
                            case 0:
                            column="identificador"
                            break;
                            case 1:
                            column="municipio"
                            break;
                            case 2:
                            column="estado"
                            break;
                            case 3:
                            column="redes"
                            break;
                            case 4:
                            column="agencia_sigla"
                            break;
                        }
    
                            texto="+and+"+column+"+like+upper%28%27%25"+this.value+"%25%27%29"
    
                            var uri='https://mapas.igac.gov.co/server/rest/services/centrocontrol/EstacionesGeodesicas/MapServer/0/query?where=es_activa_gnss=1'+texto+'&outFields=identificador%2Cmunicipio%2Cestado%2Credes%2Cagencia_sigla&returnGeometry=false&f=pjson';
    
                            table.ajax.url(uri).load();
    
                           table.search(this.value).draw();
                           console.log(uri)
                    }
                });
            });
    
                
            })
    
              
    </script>



</body>
</html>